<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Someone Special üíò</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins:wght@300;400;600&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
height:100vh;
overflow:hidden;
font-family:'Poppins',sans-serif;
background:radial-gradient(circle at center,#2b0f1f,#12060d 70%);
color:white;
}

/* ===== GENERAL PAGE ===== */
.page{
position:absolute;
width:100%;
height:100%;
display:flex;
align-items:center;
justify-content:center;
flex-direction:column;
transition:1s ease;
}
.hidden{opacity:0;transform:scale(1.1);pointer-events:none}

/* ===== PROPOSAL ===== */
.card{
width:min(92%,430px);
padding:45px 35px;
background:rgba(255,255,255,.08);
backdrop-filter:blur(25px);
border-radius:30px;
text-align:center;
box-shadow:0 0 60px rgba(255,77,109,.3);
}
.emoji{font-size:75px;margin-bottom:20px;animation:heartbeat 1.5s infinite}
@keyframes heartbeat{50%{transform:scale(1.15)}}

h2{font-family:'Playfair Display',serif;margin-bottom:35px}

.buttons{position:relative;height:80px;width:100%}
button{
position:absolute;
padding:14px 38px;
border:none;
border-radius:40px;
cursor:pointer;
font-size:16px;
transition:.3s;
}
#yes{left:15%;background:linear-gradient(135deg,#ff4d6d,#ff758f);color:white;box-shadow:0 0 30px rgba(255,77,109,.6)}
#no{left:55%;background:white;color:black}

/* ===== GAME ===== */
#gameStage{display:none}
.instructions{text-align:center;margin-bottom:25px}
.instructions h1{font-family:'Dancing Script';font-size:3rem;color:#ff8fa3}
.hiding-spots-container{
display:flex;flex-wrap:wrap;gap:28px;justify-content:center;max-width:700px;
}
.hiding-spot{font-size:3rem;cursor:pointer;transition:.4s}
.hiding-spot:hover{transform:scale(1.3) rotate(10deg)}
.hiding-spot.revealed{animation:popOpen .5s forwards}
@keyframes popOpen{to{transform:scale(0);opacity:0}}

/* ===== ENVELOPE STAGE ===== */
#envelopeStage{
display:none;
flex-direction:column;
align-items:center;
justify-content:center;
opacity:0;
transition:opacity 1.5s ease;
position:absolute;
top:50%;
left:50%;
transform:translate(-50%,-50%);
width:100%;
}
#envelopeStage.visible{display:flex;opacity:1}

/* Envelope */
.envelope-container{position:relative;cursor:pointer;transition:.5s}
.envelope-container:hover{transform:scale(1.05)}

.envelope{
width:300px;height:200px;background:#ff4d6d;border-radius:10px;
position:relative;box-shadow:0 10px 25px rgba(0,0,0,.4);
display:flex;justify-content:center;align-items:center;overflow:hidden;
}

.flap{
position:absolute;top:0;left:0;width:0;height:0;
border-left:150px solid transparent;
border-right:150px solid transparent;
border-top:110px solid #ff758f;
transform-origin:top;
transition:transform .6s ease .5s;
z-index:5;
}

.pocket{
position:absolute;bottom:0;left:0;width:0;height:0;
border-left:150px solid transparent;
border-right:150px solid transparent;
border-bottom:200px solid #ff4d6d;
z-index:3;
}

.letter-preview{
width:260px;height:180px;background:white;
position:absolute;bottom:0;border-radius:5px;
transition:transform .8s ease 1s;
}

.seal{
width:40px;height:40px;background:#d00000;border-radius:50%;
position:absolute;top:80px;left:130px;
display:flex;justify-content:center;align-items:center;
color:#ffcccb;font-size:1.2rem;z-index:6;
transition:.5s;
}

/* Open animation */
.envelope-container.open .flap{transform:rotateX(180deg);z-index:1}
.envelope-container.open .seal{opacity:0}
.envelope-container.open .letter-preview{transform:translateY(-100px)}

/* Open button below envelope with space and fade-in */
.open-btn{
  margin-top:20rem; /* increased spacing below envelope */
  padding:1rem 3rem;
  background:white;
  color:#ff4d6d;
  border:none;
  border-radius:50px;
  font-size:1.3rem;
  cursor:pointer;
  box-shadow:0 5px 15px rgba(255,77,109,.4);
  opacity:0;
  transform:translateY(20px);
  transition:opacity .8s ease, transform .8s ease;
}
.open-btn.visible{
  opacity:1;
  transform:translateY(0);
}
.open-btn:hover{transform:translateY(-3px)}
/* Letter overlay */
#letter-view{
position:fixed;top:0;left:0;width:100%;height:100%;
background:rgba(0,0,0,.6);backdrop-filter:blur(6px);
display:none;justify-content:center;align-items:center;
opacity:0;transition:.5s;z-index:50;
}
#letter-view.active{display:flex;opacity:1}

.love-letter {
    background:white;
    color:#333; /* text color for visibility */
    width:90%;
    max-width:600px;
    padding:3rem;
    border-radius:5px;
    background-image:repeating-linear-gradient(white 0px, white 24px, #e9ecef 25px);
    line-height:25px;
    transform:scale(.8);
    transition:.5s;
    font-family:'Dancing Script',cursive;
}
.love-letter h2 {
    text-align:center;
    color:#ff4d6d; /* heading color */
    font-family:'Dancing Script',cursive;
    font-size:2.8rem;
    margin-bottom:2rem;
}
.love-letter p {
    font-size:1.8rem;
    margin-bottom:1.5rem;
    color:#333; /* text color for paragraphs */
}


.close-btn{
position:absolute;top:15px;right:20px;font-size:1.5rem;
background:none;border:none;cursor:pointer;
}

/* Falling roses */
.petal{
position:absolute;top:-20px;font-size:18px;
animation:fall linear forwards;pointer-events:none;
}
@keyframes fall{
to{transform:translateY(110vh) rotate(360deg);opacity:0}
}
</style>
</head>

<body>

<!-- ===== PROPOSAL ===== -->
<div id="proposalStage" class="page">
<div class="card">
<div class="emoji">üåπ‚ù§Ô∏è</div>
<h2>Palwasha,<br>will you be my Valentine?</h2>
<div class="buttons">
<button id="yes">Yes üíñ</button>
<button id="no">No üôà</button>
</div>
</div>
</div>

<!-- ===== GAME ===== -->
<div id="gameStage" class="page">
<div class="instructions">
<h1>Find My Heart ‚ù§Ô∏è</h1>
<p>Find 3 hidden hearts</p>
<p>Hearts Found: <span id="counter">0</span>/3</p>
</div>
<div class="hiding-spots-container"></div>
</div>

<!-- ===== ENVELOPE ===== -->
<div id="envelopeStage" class="page">
<div class="envelope-container" id="envelope">
<div class="envelope">
<div class="pocket"></div>
<div class="letter-preview"></div>
<div class="flap"></div>
<div class="seal">‚ù§Ô∏è</div>
</div>
</div>

<!-- Button outside envelope container -->
<button class="open-btn" id="openBtn" onclick="openEnvelope()">Open Me üíå</button>
</div> <!-- closes envelopeStage -->

<!-- Letter overlay -->
<div id="letter-view">
  <div class="love-letter">
    <button class="close-btn" onclick="closeLetter()">√ó</button>
 
	<h2>My Dearest Valentine,</h2>
	<p>Even miles apart, you've found the deepest parts of my heart.</p>
	<p>Every moment with you, whether near or far, is a surprise I cherish, a gift I never want to stop opening.</p>
	<p>Thank you for being my adventure, my comfort, and my love, even across the distance.</p>
	<p>Though we may be apart, my heart is always with you.</p>
    	<p>Happy Valentine's Day! ‚ù§Ô∏è</p>
    	<p style="text-align: right;">- Yours forever</p>
    	<p style="text-align: right;">   Bilal</p>
  </div>
</div>


<script>
const yesBtn=document.getElementById("yes");
const noBtn=document.getElementById("no");
const proposalStage=document.getElementById("proposalStage");
const gameStage=document.getElementById("gameStage");
const envelopeStage=document.getElementById("envelopeStage");
const openBtn=document.getElementById("openBtn");

noBtn.addEventListener("mouseenter",()=>{
noBtn.style.left=Math.random()*400+"px";
noBtn.style.top=Math.random()*160+"px";
});

yesBtn.addEventListener("click",()=>{
confetti({particleCount:200,spread:120});
proposalStage.classList.add("hidden");
setTimeout(()=>{
proposalStage.style.display="none";
gameStage.style.display="flex";
initGame();
},1000);
});

/* ===== GAME ===== */
let heartsFound=0;
function initGame(){
const container=document.querySelector(".hiding-spots-container");
const items=['üéÅ','üß∏','üíê','üíå','üç¨','üßÅ','üåπ','‚òÅÔ∏è','üéÄ','üéà','üéä','üíù'];
let heartIndexes=new Set();
while(heartIndexes.size<3){
heartIndexes.add(Math.floor(Math.random()*items.length));
}
items.forEach((icon,index)=>{
const div=document.createElement("div");
div.className="hiding-spot";
div.innerText=icon;
div.dataset.heart=heartIndexes.has(index);
div.onclick=()=>checkSpot(div);
container.appendChild(div);
});
}

function checkSpot(el){
if(el.dataset.clicked)return;
el.dataset.clicked=true;

if(el.dataset.heart==="true"){
el.innerText="‚ù§Ô∏è";
el.classList.add("revealed");
heartsFound++;
document.getElementById("counter").innerText=heartsFound;
if(heartsFound===3){
setTimeout(showEnvelopeStage,1200);
}
}else{
el.style.opacity=.3;
}
}

function showEnvelopeStage(){
gameStage.classList.add("hidden");
setTimeout(()=>{
gameStage.style.display="none";
envelopeStage.style.display="flex";
setTimeout(()=>{
envelopeStage.classList.add("visible");
openBtn.classList.add("visible"); // fade-in button
},100);
},1000);
}

/* ===== ENVELOPE ===== */
function openEnvelope(){
const envContainer=document.getElementById("envelope");
const letterView=document.getElementById("letter-view");
envContainer.classList.add("open");
setTimeout(()=>{
letterView.classList.add("active");
confetti({particleCount:300,spread:150});
},1500);
}

function closeLetter(){
document.getElementById("letter-view").classList.remove("active");
}

/* Falling petals */
function createPetal(){
const petal=document.createElement("div");
petal.className="petal";
petal.innerHTML="üåπ";
petal.style.left=Math.random()*100+"vw";
petal.style.animationDuration=Math.random()*5+5+"s";
document.body.appendChild(petal);
setTimeout(()=>petal.remove(),10000);
}
setInterval(createPetal,800);
</script>

</body>
</html>
